import{i as e}from"./index-21b83678.js";import"./vue-echarts-85a407f1.js";import{a as s,b as r}from"./element-plus-25f6940e.js";import"./store-b4387695.js";import{u as o}from"./index-09aaee4e.js";import{d as a,e as t,R as i,Y as l,o as p,I as m,J as n,b as u,K as d,N as c}from"./@vue.runtime-core-4f5b9f62.js";import{e as f,u as b}from"./@vue.reactivity-bec702f3.js";import"./@vue.runtime-dom-c19fd55a.js";import"./@vue.shared-5670d8a7.js";import"./axios-4954bb58.js";import"./nprogress-92837e9c.js";import"./lodash-es-a085e596.js";import"./vue-router-18ffceba.js";import"./pinia-dbeeb1e2.js";import"./vue-demi-5b9a0fa5.js";import"./@vueuse.core-d0bf94bd.js";import"./@vueuse.shared-3f1de09b.js";import"./vue-f9f57ea9.js";import"./mockjs-9b27e2f7.js";import"./mitt-dab1f1cb.js";import"./@element-plus.icons-vue-c0c6c02f.js";import"./@popperjs.core-040feab9.js";import"./@ctrl.tinycolor-84ad98d6.js";import"./dayjs-a0adaf64.js";import"./async-validator-efc2d198.js";import"./memoize-one-99e54574.js";import"./escape-html-4bbaf1e1.js";import"./normalize-wheel-es-da779ce4.js";import"./@floating-ui.dom-9d85c32a.js";import"./@floating-ui.core-c56fb7e8.js";import"./resize-detector-94afada7.js";import"./echarts-33de40b3.js";import"./tslib-ed971494.js";import"./zrender-d158d5d4.js";const j=a({name:"sys-log"}),h=a({...j,setup(a){const{service:j}=o(),h=f(1),v=e.exports.useCrud({service:j.base.sys.log},(e=>{e.refresh()})),g=e.exports.useTable({contextMenu:["refresh"],columns:[{type:"index",label:"#",width:60},{prop:"userId",label:"用戶ID"},{prop:"name",label:"暱稱",minWidth:150},{prop:"action",label:"請求地址",minWidth:200,showOverflowTooltip:!0},{prop:"params",label:"參數",minWidth:200,showOverflowTooltip:!0},{prop:"ip",label:"ip",minWidth:150},{prop:"ipAddr",label:"ip地址",minWidth:150},{prop:"createTime",label:"創建時間",minWidth:160,sortable:!0}]});function y(){j.base.sys.log.setKeep({value:h.value}).then((()=>{s.success("保存成功")}))}function x(){r.confirm("是否要清空日誌","提示",{type:"warning"}).then((()=>{j.base.sys.log.clear().then((()=>{var e;s.success("清空成功"),null==(e=v.value)||e.refresh()})).catch((e=>{s.error(e.message)}))})).catch((()=>null))}return t((()=>{j.base.sys.log.getKeep().then((e=>{h.value=Number(e)}))})),(e,s)=>{const r=i("cl-refresh-btn"),o=i("el-button"),a=i("el-input-number"),t=i("cl-filter"),f=i("cl-flex1"),w=i("cl-search-key"),_=i("el-row"),T=i("cl-table"),W=i("cl-pagination"),k=i("cl-crud"),z=l("permission");return p(),m(k,{ref_key:"Crud",ref:v},{default:n((()=>[u(_,null,{default:n((()=>[u(r),d((p(),m(o,{type:"danger",onClick:x},{default:n((()=>[c(" 清空 ")])),_:1})),[[z,b(j).base.sys.log.permission.clear]]),u(t,{label:"日誌保存天數"},{default:n((()=>[u(a,{modelValue:h.value,"onUpdate:modelValue":s[0]||(s[0]=e=>h.value=e),"controls-position":"right",max:1e4,min:1,onChange:y},null,8,["modelValue"])])),_:1}),u(f),u(w,{placeholder:"請求地址、參數、ip"})])),_:1}),u(_,null,{default:n((()=>[u(T,{ref_key:"Table",ref:g,"default-sort":{prop:"createTime",order:"descending"}},null,512)])),_:1}),u(_,null,{default:n((()=>[u(f),u(W)])),_:1})])),_:1},512)}}});export{h as default};
