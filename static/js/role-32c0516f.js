import{i as e,d as t}from"./index-9d3f82e1.js";import"./vue-echarts-85a407f1.js";import"./element-plus-3d06375f.js";import"./store-96e17a43.js";import{u as l}from"./index-c9cbb650.js";import{d as a,p as r,R as o,o as s,c as n,b as c,a as p,J as d,I as i}from"./@vue.runtime-core-4f5b9f62.js";import{e as u}from"./@vue.reactivity-bec702f3.js";import{_ as m}from"./_plugin-vue_export-helper-c4cb8a60.js";import"./@vue.runtime-dom-c19fd55a.js";import"./@vue.shared-5670d8a7.js";import"./axios-966d6f38.js";import"./nprogress-6d1393d1.js";import"./lodash-es-a085e596.js";import"./vue-router-18ffceba.js";import"./pinia-dbeeb1e2.js";import"./vue-demi-5b9a0fa5.js";import"./@vueuse.core-d0bf94bd.js";import"./@vueuse.shared-3f1de09b.js";import"./vue-2b98d5da.js";import"./mockjs-93ca2bc8.js";import"./mitt-dab1f1cb.js";import"./@element-plus.icons-vue-c0c6c02f.js";import"./@popperjs.core-040feab9.js";import"./@ctrl.tinycolor-84ad98d6.js";import"./dayjs-dd470533.js";import"./async-validator-efc2d198.js";import"./memoize-one-99e54574.js";import"./escape-html-4bbaf1e1.js";import"./normalize-wheel-es-da779ce4.js";import"./@floating-ui.dom-9d85c32a.js";import"./@floating-ui.core-c56fb7e8.js";import"./resize-detector-94afada7.js";import"./echarts-33de40b3.js";import"./tslib-ed971494.js";import"./zrender-d158d5d4.js";const f={class:"menu-check"},h={class:"menu-check__scroller"},b=a({name:"menu-check"}),v=m(a({...b,props:{modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(a,{emit:i}){const m=a,{service:b}=l(),v=u(),y=u(),j=u("");function k(e,t){return!e||t.name.includes(e)}function _(e,{checkedKeys:t,halfCheckedKeys:l}){i("update:modelValue",[...t,...l])}return r(j,(e=>{v.value.filter(e)})),e.exports.useUpsert({async onOpened(){await async function(){return b.base.sys.menu.list().then((e=>{y.value=t(e)}))}(),v.value.setCheckedKeys((m.modelValue||[]).filter((e=>{var t;return null==(t=v.value.getNode(e))?void 0:t.isLeaf})))}}),(e,t)=>{const l=o("el-input"),a=o("el-tree"),r=o("el-scrollbar");return s(),n("div",f,[c(l,{modelValue:j.value,"onUpdate:modelValue":t[0]||(t[0]=e=>j.value=e),placeholder:"输入關鍵字进行过滤"},null,8,["modelValue"]),p("div",h,[c(r,{"max-height":"200px"},{default:d((()=>[c(a,{ref_key:"Tree",ref:v,"node-key":"id","show-checkbox":"",data:y.value,props:{label:"name",children:"children"},"filter-node-method":k,onCheck:_},null,8,["data"])])),_:1})])])}}}),[["__scopeId","data-v-1eb9b64a"]]),y={class:"dept-check"},j={class:"dept-check__search"},k={class:"dept-check__tree"},_=a({name:"dept-check"}),x=m(a({..._,props:{modelValue:{type:Array,default:()=>[]},checkStrictly:Boolean},emits:["update:modelValue"],setup(a,{emit:i}){const m=a,{service:f}=l(),h=u(),b=u(),v=u("");function _(e,t){return!e||t.name.includes(e)}function x(e,{checkedKeys:t}){i("update:modelValue",t)}return r(v,(e=>{h.value.filter(e)})),e.exports.useUpsert({async onOpened(){await async function(){return f.base.sys.department.list().then((e=>{b.value=t(e)}))}(),h.value.setCheckedKeys(m.modelValue||[])}}),(e,t)=>{const l=o("el-input"),r=o("el-tree"),i=o("el-scrollbar");return s(),n("div",y,[p("div",j,[c(l,{modelValue:v.value,"onUpdate:modelValue":t[0]||(t[0]=e=>v.value=e),placeholder:"输入關鍵字进行过滤"},null,8,["modelValue"])]),p("div",k,[c(i,{"max-height":"200px"},{default:d((()=>[c(r,{ref_key:"Tree",ref:h,"node-key":"id","show-checkbox":"",data:b.value,props:{label:"name",children:"children"},"filter-node-method":_,"check-strictly":a.checkStrictly,onCheck:x},null,8,["data","check-strictly"])])),_:1})])])}}}),[["__scopeId","data-v-c842d5fe"]]),V=p("span",{style:{marginLeft:"10px",fontSize:"12px"}},"是否關聯上下級",-1),g=a({name:"sys-role"}),w=a({...g,setup(t){const{service:a}=l(),r=e.exports.useCrud({service:a.base.sys.role},(e=>{e.refresh()})),n=e.exports.useUpsert({dialog:{width:"800px"},items:[{prop:"name",label:"名稱",span:12,required:!0,component:{name:"el-input"}},{prop:"label",label:"標識",span:12,required:!0,component:{name:"el-input"}},{prop:"remark",label:"備註",span:24,component:{name:"el-input",props:{type:"textarea",rows:4}}},{label:"功能權限",prop:"menuIdList",value:[],component:{vm:v}},{label:"數據權限",prop:"relevance",flex:!1,component:{name:"slot-relevance"}},{label:"",prop:"departmentIdList",value:[],component:{vm:x,style:{marginTop:"-10px"}}}],onOpened(e){u(e.relevance||0)}}),p=e.exports.useTable({columns:[{type:"selection",width:60},{prop:"name",label:"名稱",minWidth:150},{prop:"label",label:"標識",minWidth:120},{prop:"remark",label:"備註",showOverflowTooltip:!0,minWidth:150},{prop:"createTime",label:"創建時間",sortable:"custom",minWidth:160},{prop:"updateTime",label:"更新時間",sortable:"custom",minWidth:160},{label:"操作",type:"op",buttons:["edit","delete"]}]});function u(e){var t;null==(t=n.value)||t.setProps("departmentIdList",{checkStrictly:0==e})}return(e,t)=>{const l=o("cl-refresh-btn"),a=o("cl-add-btn"),m=o("cl-multi-delete-btn"),f=o("cl-flex1"),h=o("cl-search-key"),b=o("el-row"),v=o("cl-table"),y=o("cl-pagination"),j=o("el-switch"),k=o("cl-upsert"),_=o("cl-crud");return s(),i(_,{ref_key:"Crud",ref:r},{default:d((()=>[c(b,null,{default:d((()=>[c(l),c(a),c(m),c(f),c(h)])),_:1}),c(b,null,{default:d((()=>[c(v,{ref_key:"Table",ref:p,"default-sort":{prop:"createTime",order:"descending"}},null,512)])),_:1}),c(b,null,{default:d((()=>[c(f),c(y)])),_:1}),c(k,{ref_key:"Upsert",ref:n},{"slot-relevance":d((({scope:e})=>[c(j,{modelValue:e.relevance,"onUpdate:modelValue":t=>e.relevance=t,"active-value":1,"inactive-value":0,onChange:u},null,8,["modelValue","onUpdate:modelValue"]),V])),_:1},512)])),_:1},512)}}});export{w as default};
